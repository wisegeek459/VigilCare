<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>VigilCare - Submit Incident</title>
  <link rel="stylesheet" href="styles.css">
  
  <!-- Load Google Identity Services (GIS) -->
  <script src="https://accounts.google.com/gsi/client" async defer></script>
  
  <!-- Load Google API Client Library -->
  <script src="https://apis.google.com/js/api.js"></script>
</head>
<body>
  <div class="form-container">
    <h2>Submit a New Incident</h2>
    <form id="incident-form">
      <label for="patient-name">Patient Name</label>
      <input type="text" id="patient-name" placeholder="Enter patient's name" required>

      <label for="attendant-name">Attendant Name</label>
      <input type="text" id="attendant-name" placeholder="Enter attendant's name" required>

      <label for="incident-type">Incident Type</label>
      <select id="incident-type">
        <option value="Verbal Abuse">Verbal Abuse</option>
        <option value="Physical Violence">Physical Violence</option>
        <option value="Property Damage">Property Damage</option>
      </select>

      <label for="incident-description">Incident Description</label>
      <textarea id="incident-description" rows="4" placeholder="Describe the incident"></textarea>

      <button type="submit">Submit</button>
    </form>

    <!-- Google Sign-In Button using GIS -->
    <div id="g_id_onload"
         data-client_id="959824072139-lroeeknsfvsmtgnqmtkokm02g1ggqbbe.apps.googleusercontent.com"
         data-context="signin"
         data-ux_mode="popup"
         data-login_uri=""
         data-callback="handleCredentialResponse">
    </div>
    <div class="g_id_signin" data-type="standard"></div>
  </div>

  <script>
    let oauthToken = null;

    // Handle the response from Google Identity Services (GIS)
    function handleCredentialResponse(response) {
      console.log("Encoded JWT ID token: " + response.credential);

      // Exchange the JWT token for OAuth2 access token via the backend or directly use the credential to authorize API calls
      oauthToken = response.credential; // Store the credential
      gapi.load('client', initializeGoogleSheetsAPI); // Initialize Sheets API after sign-in
    }

    // Initialize Google Sheets API client
    function initializeGoogleSheetsAPI() {
      gapi.client.init({
      
